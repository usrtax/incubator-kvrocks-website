"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[173],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var a=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,i=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=c(n),d=s,_=p["".concat(l,".").concat(d)]||p[d]||m[d]||i;return n?a.createElement(_,r(r({ref:t},u),{},{components:n})):a.createElement(_,r({ref:t},u))}));function d(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var i=n.length,r=new Array(i);r[0]=p;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:s,r[1]=o;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5526:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return m}});var a=n(7462),s=n(3366),i=(n(7294),n(3905)),r=["components"],o={},l="Info Section Explanation",c={unversionedId:"UserGuide/info-section-explain",id:"UserGuide/info-section-explain",title:"Info Section Explanation",description:"The INFO command returns information and statistics about the server in a format that is simple to parse by computers and easy to read by humans.",source:"@site/docs/03-UserGuide/00-info-section-explain.md",sourceDirName:"03-UserGuide",slug:"/UserGuide/info-section-explain",permalink:"/docs/UserGuide/info-section-explain",draft:!1,editUrl:"https://github.com/apache/incubator-kvrocks-website/tree/main/docs/03-UserGuide/00-info-section-explain.md",tags:[],version:"current",lastUpdatedBy:"Ruixiang Tan",lastUpdatedAt:1662905954,formattedLastUpdatedAt:"9/11/2022",sidebarPosition:0,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Server Installation",permalink:"/docs/server-installation"},next:{title:"Namespace",permalink:"/docs/UserGuide/namespace"}},u={},m=[{value:"Return value",id:"return-value",level:3},{value:"Server Section",id:"server-section",level:2},{value:"Clients Section",id:"clients-section",level:2},{value:"Memory Section",id:"memory-section",level:2},{value:"Stats Section",id:"stats-section",level:2},{value:"CommandStats Section",id:"commandstats-section",level:2},{value:"Persistence Section",id:"persistence-section",level:2},{value:"Replication Section",id:"replication-section",level:2},{value:"CPU Section",id:"cpu-section",level:2},{value:"Keyspace Section",id:"keyspace-section",level:2},{value:"RocksDB Section",id:"rocksdb-section",level:2}],p={toc:m};function d(e){var t=e.components,n=(0,s.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"info-section-explanation"},"Info Section Explanation"),(0,i.kt)("p",null,"The INFO command returns information and statistics about the server in a format that is simple to parse by computers and easy to read by humans."),(0,i.kt)("p",null,"The optional parameter can be used to select a specific section of information:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"server: General information about the Kvrocks server"),(0,i.kt)("li",{parentName:"ul"},"clients: Client connections section"),(0,i.kt)("li",{parentName:"ul"},"memory: Memory consumption related information"),(0,i.kt)("li",{parentName:"ul"},"stats: General statistics"),(0,i.kt)("li",{parentName:"ul"},"replication: Master/replica replication information"),(0,i.kt)("li",{parentName:"ul"},"cpu: CPU consumption statistics"),(0,i.kt)("li",{parentName:"ul"},"commandstats: Kvrocks command statistics"),(0,i.kt)("li",{parentName:"ul"},"keyspace: Database related statistics"),(0,i.kt)("li",{parentName:"ul"},"RocksDB: RocksDB related statistics")),(0,i.kt)("h3",{id:"return-value"},"Return value"),(0,i.kt)("p",null,"Bulk string reply: as a collection of text lines."),(0,i.kt)("p",null,"Lines can contain a section name (starting with a # character) or a property. All the properties are in the form of field:value terminated by \\r\\n."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"# Server\nversion:999.999.999\ngit_sha1:d2c0afb\nos:Darwin 19.4.0 x86_64\ngcc_version:4.2.1\narch_bits:64\nprocess_id:1467\ntcp_port:6666\nuptime_in_seconds:8\nuptime_in_days:0\n\n# Clients\nconnected_clients:1\nmonitor_clients:0\n# Memory\nused_memory_rss:19558400\nused_memory_human:18.65M\nused_memory_lua:35840\nused_memory_lua_human:35.00K\n\n# Persistence\nloading:0\n\n# Stats\ntotal_connections_received:1\ntotal_commands_processed:2\ninstantaneous_ops_per_sec:0\ntotal_net_input_bytes:23\ntotal_net_output_bytes:8231\ninstantaneous_input_kbps:0\ninstantaneous_output_kbps:0\nsync_full:0\nsync_partial_ok:0\nsync_partial_err:0\npubsub_channels:0\npubsub_patterns:0\n\n# Replication\nrole:master\nconnected_slaves:0\nmaster_repl_offset:0\n\n# CPU\nused_cpu_sys:0\nused_cpu_user:0\n\n# Commandstats\ncmdstat_command:calls=1,usec=904,usec_per_call=904\ncmdstat_info:calls=1,usec=0,usec_per_call=0\n\n# Keyspace\n# Last scan db time: Thu Jan  1 08:00:00 1970\ndb0:keys=0,expires=0,avg_ttl=0,expired=0\nsequence:0\nused_db_size:0\nmax_db_size:0\nused_percent: 0%\ndisk_capacity:499963174912\nused_disk_size:266419978240\nused_disk_percent: 53%\n\n# RocksDB\nestimate_keys[default]:0\nblock_cache_usage[default]:0\nblock_cache_pinned_usage[default]:0\nindex_and_filter_cache_usage:[default]:0\nestimate_keys[metadata]:0\nblock_cache_usage[metadata]:0\nblock_cache_pinned_usage[metadata]:0\nindex_and_filter_cache_usage:[metadata]:0\nestimate_keys[zset_score]:0\nblock_cache_usage[zset_score]:0\nblock_cache_pinned_usage[zset_score]:0\nindex_and_filter_cache_usage:[zset_score]:0\nestimate_keys[pubsub]:0\nblock_cache_usage[pubsub]:0\nblock_cache_pinned_usage[pubsub]:0\nindex_and_filter_cache_usage:[pubsub]:0\nestimate_keys[propagate]:0\nblock_cache_usage[propagate]:0\nblock_cache_pinned_usage[propagate]:0\nindex_and_filter_cache_usage:[propagate]:0\nall_mem_tables:3520\ncur_mem_tables:3520\nsnapshots:0\nnum_immutable_tables:0\nnum_running_flushes:0\nmemtable_flush_pending:0\ncompaction_pending:0\nnum_running_compactions:0\nnum_live_versions:5\nnum_superversion:5\nnum_background_errors:0\nflush_count:0\ncompaction_count:0\nis_bgsaving:no\nis_compacting:no\n")),(0,i.kt)("h2",{id:"server-section"},"Server Section"),(0,i.kt)("p",null,"Here is the meaning of all fields in the server section:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"version: Version of the Kvrocks server"),(0,i.kt)("li",{parentName:"ul"},"git_sha1: Git SHA1"),(0,i.kt)("li",{parentName:"ul"},"os: Operating system hosting the Kvrocks server"),(0,i.kt)("li",{parentName:"ul"},"arch_bits: Architecture (32 or 64 bits)"),(0,i.kt)("li",{parentName:"ul"},"gcc_version: Version of the GCC compiler used to compile the Kvrocks server"),(0,i.kt)("li",{parentName:"ul"},"process_id: PID of the server process"),(0,i.kt)("li",{parentName:"ul"},"tcp_port: TCP/IP listen port"),(0,i.kt)("li",{parentName:"ul"},"uptime_in_seconds: Number of seconds since Kvrocks server start"),(0,i.kt)("li",{parentName:"ul"},"uptime_in_days: Same value expressed in days")),(0,i.kt)("h2",{id:"clients-section"},"Clients Section"),(0,i.kt)("p",null,"Here is the meaning of all fields in the clients section:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"connected_clients: Number of client connections (excluding connections from replicas)"),(0,i.kt)("li",{parentName:"ul"},"monitor_clients: Number of monitor client connections")),(0,i.kt)("h2",{id:"memory-section"},"Memory Section"),(0,i.kt)("p",null,"Here is the meaning of all fields in the memory section:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"used_memory_rss: Number of bytes that Kvrocks allocated as seen by the operating system (a.k.a resident set size). This is the number reported by tools such as top(1) and ps(1)"),(0,i.kt)("li",{parentName:"ul"},"used_memory_rss_human: Human-readable representation of previous value"),(0,i.kt)("li",{parentName:"ul"},"used_memory_lua: Number of bytes used by the Lua engine"),(0,i.kt)("li",{parentName:"ul"},"used_memory_lua_human: Human-readable representation of previous value")),(0,i.kt)("h2",{id:"stats-section"},"Stats Section"),(0,i.kt)("p",null,"Here is the meaning of all fields in the stats section:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"total_connections_received: Total number of connections accepted by the server"),(0,i.kt)("li",{parentName:"ul"},"total_commands_processed: Total number of commands processed by the server"),(0,i.kt)("li",{parentName:"ul"},"instantaneous_ops_per_sec: Number of commands processed per second"),(0,i.kt)("li",{parentName:"ul"},"total_net_input_bytes: The total number of bytes read from the network"),(0,i.kt)("li",{parentName:"ul"},"total_net_output_bytes: The total number of bytes written to the network"),(0,i.kt)("li",{parentName:"ul"},"instantaneous_input_kbps: The network's read rate per second in KB/sec"),(0,i.kt)("li",{parentName:"ul"},"instantaneous_output_kbps: The network's write rate per second in KB/sec"),(0,i.kt)("li",{parentName:"ul"},"sync_full: The number of full resyncs with replicas"),(0,i.kt)("li",{parentName:"ul"},"sync_partial_ok: The number of accepted partial resync requests"),(0,i.kt)("li",{parentName:"ul"},"sync_partial_err: The number of denied partial resync requests"),(0,i.kt)("li",{parentName:"ul"},"pubsub_channels: Global number of pub/sub channels with client subscriptions"),(0,i.kt)("li",{parentName:"ul"},"pubsub_patterns: Global number of pub/sub pattern with client subscriptions")),(0,i.kt)("h2",{id:"commandstats-section"},"CommandStats Section"),(0,i.kt)("p",null,"The commandstats section provides statistics based on the command type, including the number of calls that reached command execution, the total CPU time consumed by these commands, the average CPU consumed per command execution."),(0,i.kt)("p",null,"For each command type, the following line is added:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"cmdstat_XXX: calls=XXX,usec=XXX,usec_per_call=XXX"))),(0,i.kt)("h2",{id:"persistence-section"},"Persistence Section"),(0,i.kt)("p",null,"Here is the meaning of all fields in the replicatoin section:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"loading: Flag indicating if the restore of the backup is on-going")),(0,i.kt)("h2",{id:"replication-section"},"Replication Section"),(0,i.kt)("p",null,"Here is the meaning of all fields in the replicatoin section:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'role: Value is "master" if the instance is replica of no one, or "slave" if the instance is a replica of some master instance. Note that a replica can be master of another replica (chained replication).'),(0,i.kt)("li",{parentName:"ul"},"master_repl_offset: The server's current replication offset")),(0,i.kt)("p",null,"If the instance is a replica, these additional fields are provided:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"master_host: Host or IP address of the master"),(0,i.kt)("li",{parentName:"ul"},"master_port: Master listening TCP port"),(0,i.kt)("li",{parentName:"ul"},"master_link_status: Status of the link (up/down)"),(0,i.kt)("li",{parentName:"ul"},"master_last_io_seconds_ago: Number of seconds since the last interaction with master"),(0,i.kt)("li",{parentName:"ul"},"master_sync_in_progress: Indicate the master is syncing to the replica"),(0,i.kt)("li",{parentName:"ul"},"slave_repl_offset: The replication offset of the replica instance"),(0,i.kt)("li",{parentName:"ul"},"slave_priority: The priority of the instance as a candidate for failover")),(0,i.kt)("h2",{id:"cpu-section"},"CPU Section"),(0,i.kt)("p",null,"Here is the meaning of all fields in the cpu section:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"used_cpu_sys: System CPU consumed by the Kvrocks server, which is the sum of system CPU consumed by all threads of the server process (main thread and background threads)"),(0,i.kt)("li",{parentName:"ul"},"used_cpu_user: User CPU consumed by the Kvrocks server, which is the sum of user CPU consumed by all threads of the server process (main thread and background threads)")),(0,i.kt)("h2",{id:"keyspace-section"},"Keyspace Section"),(0,i.kt)("p",null,"The keyspace section provides statistics on the main dictionary of each database. The statistics are the number of keys, and the number of keys with an expiration. Note that Kvrocks only have ",(0,i.kt)("inlineCode",{parentName:"p"},"db0")," and keys statistics wasn't manipulated in memor, so we need to use the ",(0,i.kt)("inlineCode",{parentName:"p"},"dbsize scan")," to async scan and calculate the keys number like below: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"# Last scan db time: Sun Oct 31 17:13:14 2021\ndb0:keys=0,expires=0,avg_ttl=0,expired=0\n")),(0,i.kt)("p",null,"The line starts with ",(0,i.kt)("inlineCode",{parentName:"p"},"#")," means the last scan was executed on ",(0,i.kt)("inlineCode",{parentName:"p"},"Oct 31 17:13:14 2021"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"sequence: The sequence number of the RocksDB"),(0,i.kt)("li",{parentName:"ul"},"used_db_size: The total disk size used by Kvrocks(NOT included the WAL)"),(0,i.kt)("li",{parentName:"ul"},"max_db_size: Max disk size can be used by Kvrocks, 0 means unlimited."),(0,i.kt)("li",{parentName:"ul"},"used_percent: Percent representation of used_db_size/max_db_size."),(0,i.kt)("li",{parentName:"ul"},"disk_capacity: The capacity of the disk."),(0,i.kt)("li",{parentName:"ul"},"used_disk_size: Total used size of the disk(NOT Kvrocks used disk size)."),(0,i.kt)("li",{parentName:"ul"},"used_disk_percent: Percent representation of used_disk_size/disk_capacity.")),(0,i.kt)("h2",{id:"rocksdb-section"},"RocksDB Section"),(0,i.kt)("p",null,"Here is the meaning of all fields in the rocksdb section:"),(0,i.kt)("p",null,"The rocksdb section provides statistics on the each rocksdb column family and all fields were exported by rocksdb, if the field  was not explained clearly enough, you can also see more information on the rocksdb wiki."),(0,i.kt)("p",null,"There are five column families on kvrocks:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"default"),": Used to store the subkeys of the complex data structure like hash/set/list/zset/geo."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"metadata"),": Used to store the metadata of the complex data structure and string."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"zset score"),": Used to store the mapping of zset's score to member, which would make the range by score operation faster."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"pubsub"),": Used to propagate the pubsub message to replicas."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"propagate"),": Used to propagate other commands to replicas except pubsub message.")),(0,i.kt)("p",null,"and below statistics were column family related:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"estimate_keys","[xxx]",": Estimate keys in the column family, may contains the tombstone and expired keys, it's a fast way to know\nhow many keys on the column family but not precise."),(0,i.kt)("li",{parentName:"ul"},"block_cache_usage","[xxx]",": Total block cache bytes used by this column family."),(0,i.kt)("li",{parentName:"ul"},"block_cache_pinned_usage","[xxx]",": Total pinned bytes in this column family."),(0,i.kt)("li",{parentName:"ul"},"index_and_filter_cache_usage: Total bytes was used to cache the index and filter block.")),(0,i.kt)("p",null,"those statistics were the entire rocksdb side:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"all_mem_tables: Approximate size of active, unflushed immutable, and pinned immutable memtables in bytes."),(0,i.kt)("li",{parentName:"ul"},"cur_mem_tables: Approximate size of active and unflushed immutable memtable in bytes."),(0,i.kt)("li",{parentName:"ul"},"snapshots: Number of snapshots in rocksdb."),(0,i.kt)("li",{parentName:"ul"},"num_immutable_tables: Number of the immutable."),(0,i.kt)("li",{parentName:"ul"},"num_running_flushes: Number of currently running flushes."),(0,i.kt)("li",{parentName:"ul"},"memtable_flush_pending: This metric returns 1 if a memtable flush is pending; otherwhise it returns 0."),(0,i.kt)("li",{parentName:"ul"},"compaction_pending: This metric returns 1 if at least one compaction is pending; otherwise, the metric reports 0."),(0,i.kt)("li",{parentName:"ul"},"num_running_compactions: Number of currently running compactions."),(0,i.kt)("li",{parentName:"ul"},"num_live_versions: Number of live versions. More live versions often mean more SST files are held from being deleted, by iterators or unfinished compactions. "),(0,i.kt)("li",{parentName:"ul"},"num_background_errors: Accumulated number of background errors."),(0,i.kt)("li",{parentName:"ul"},"flush_count: Number of flushes."),(0,i.kt)("li",{parentName:"ul"},"compaction_count: Number of compactions."),(0,i.kt)("li",{parentName:"ul"},"is_bgsaving: This metric returns 1 if the bgsave was running; otherwhise it reutrns 0."),(0,i.kt)("li",{parentName:"ul"},"is_compacting: This metric returns 1 if the compaction was running; otherwhise it reutrns 0.")))}d.isMDXComponent=!0}}]);